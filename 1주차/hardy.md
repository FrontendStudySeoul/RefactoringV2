## 1장 리팩터링: 첫번째 예시

### 예시 코드에 리팩토링이 필요한 이유

예시 코드는 잘 동작하고 코드의 양이 많지 않아 복잡하지 않을 수 있어 문제가 없어 보일 수 있지만 확장성이 없게 작성한 코드이기 때문에 기능의 추가하거나 변경하는 과정에 문제가 생길 수 있습니다. 청구 내역을 HTML로 출력하는 기능이 추가되어야 한다면 예시 코드의 복잡도는 크게 증가할 것이고 연극 장르와 공연료 정책이 변경될 때마다 코드를 수정해야 합니다. 지금은 간단한 정책이지만 정책이 늘어나 복잡해질수록 수정할 부분을 찾기 어려워지고 수정 과정에서 실수가 생길 수 있습니다. 리팩토링이 필요한 이유는 이러한 변경 때문입니다.

하지만 잘못 설계된 코드는 수정하기 어렵습니다. 원하는 동작을 수행하도록 하기 위해 수정 할 부분을 찾고, 기존 코드와 잘 맞물려 작동하게 할 방법을 강구하기가 어렵고 코드가 난잡하여 무엇을 수정할지 찾기 어렵다면 실수를 저질러 버그가 생길 확률이 높아집니다. 코드가 새로운 기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩토링을 통해 구조를 바로잡은 뒤에 기능을 수정하는 편이 작업하기가 수월합니다.

### 테스트

코드에서 냄새가 나던 구조가 잘못되었던 서비스에 필요한 기능은 문제 없이 돌아가고 있습니다. 잘 돌아가던 기능이 리팩토링을 진행하는 과정 속에 실수가 발생해 예상치 못한 문제가 발생할 수 있는 가능성이 있습니다. 문제가 발생한 기능이 서비스에서 중요한 기능이라면 큰 문제가 될 것입니다. 테스트 코드는 예상치 못한 문제를 사전에 방지하기 위해 리팩토링에서 중요한 역할을 해줍니다. 

### 예시 코드 리팩토링

현재 예시 코드는 각 동작의 구분 없이 난잡한 형태로 펼쳐져 있습니다. 이런 코드는 기능을 수정하거나 추가하기에 편한 구조가 아니기 때문에 기능을 추가하기 쉽게 전체 동작 각각의 부분을 보조 함수로 나누는 작업을 진행합니다.
